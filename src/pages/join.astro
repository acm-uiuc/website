---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import OrganizationList from '../components/OrganizationList.astro';
import JoinModal from '../components/JoinModal.tsx';
import { organizationApiClient } from '../api';

const initialOrganizationState =
  await organizationApiClient.apiV1OrganizationsGet();

const discordUrl = 'https://acm.gg/discord';
const membershipUrl = '/membership';
---

<Layout title="Join" transparentNav={true}>
  <Hero />
  <OrganizationList initialOrgsList={initialOrganizationState} />
  <JoinModal
    client:load
    discordUrl={discordUrl}
    membershipUrl={membershipUrl}
  />
</Layout>
